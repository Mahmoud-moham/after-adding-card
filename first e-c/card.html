<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <style>
        /* image {
            width: 50px;
            height: 50px;
            margin: 5px;
        } */

        .product {
            padding: 10px;
            margin: 10px;
            border: 3px solid grey;
            display: flex;
            justify-content: space-between;
        }

        .product img {
            width: 50px;
            height: 50px;
            margin: 5px;
        }

        .product h3 {
            width: 10%;
        }

        .all-product {
            display: flex;
            flex-direction: column;
        }
    </style>
</head>

<body>
    <header style="text-align: center; background-color: goldenrod;">
        <h1>Add to card</h1>
    </header>
    <div class="all-product">
        <!-- <div class="product">
            <h3 class="category"></h3>
            <h4 class="titile"></h4>
            <img src="" alt="" class="img">
            <p class="priceAd"></p>
            <button onclick="console.log('deleted')">delete</button>
        </div> -->
    </div>
    <div class="button-check">
        <button onclick="clacTotalPrice()">calculate total</button>
        <h3><span class="total"></span> LE</h3>
    </div>
    <!-- ========================================= -->
    <script>
        var divAllProduct = document.getElementsByClassName('all-product')[0]
        var productDiv = document.getElementsByClassName('product')[0]
        var Price = document.getElementsByClassName('priceAd')
        let local = localStorage

        window.onload = function () {

            // console.log(local)
            for (let iterator in local) {
                if (typeof local[iterator] == 'string') {
                    var objProduct = JSON.parse(local[iterator])
                    console.log(objProduct)
                    divAllProduct.innerHTML += `
                    <div class="product">
                        <img src="${objProduct.image}" alt="" class="img">
                        <h4 class="titile">${objProduct.title}</h4>
                        <p ><span class="priceAd">${objProduct.price}</span>&euro;</p>
                        <p class="id">${objProduct.id}</p>
                        <button onclick="deleteProduct(${objProduct.id},this)">delete</button>
                    </div>
                    `
                }

            }

        }

        function deleteProduct(id, ev) {
            alert(ev.parentNode)
            console.log(local.getItem(id))
            local.removeItem(id)
            ev.parentNode.remove()
            clacTotalPrice()


        }
        function clacTotalPrice() {
            var sum = 0;
            for (let num = 0; num < Price.length; num++) {
                sum += Number(Price[num].innerHTML)
                console.log(Price[num].innerHTML)

            }
            console.log(Math.round(sum))
            document.getElementsByClassName('total')[0].innerHTML = Math.round(sum)
        }




    </script>
</body>

</html>